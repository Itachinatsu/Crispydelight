<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Restaurant Management</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background-color: #f0f0f0;
    }
    .section {
      padding: 15px;
      width: 100%;
      max-width: 600px;
      box-sizing: border-box;
    }
    h1, h2, h3, h4 {
      margin: 10px 0;
    }
    h1 {
      font-size: 24px;
    }
    h2 {
      font-size: 20px;
    }
    h3, h4 {
      font-size: 18px;
    }
    button {
      padding: 10px 15px;
      margin: 5px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    .btn-blue { background-color: #007bff; color: white; }
    .btn-green { background-color: #28a745; color: white; }
    .btn-red { background-color: #dc3545; color: white; }
    .btn-yellow { background-color: #ffc107; color: black; }
    .btn-gray { background-color: #6c757d; color: white; }
    .btn-purple { background-color: #6f42c1; color: white; }
    .btn-blue:hover, .btn-green:hover, .btn-red:hover, .btn-yellow:hover, .btn-gray:hover, .btn-purple:hover {
      opacity: 0.9;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
    }
    input, select {
      padding: 8px;
      margin: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      margin: 5px 0;
    }
    .card {
      background-color: white;
      padding: 10px;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 10px;
    }
    .notification {
      color: #28a745;
    }
    .flex-row {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
    }
    .overflow-auto {
      overflow: auto;
      max-height: 100vh;
    }
    @media (max-width: 600px) {
      .section { padding: 10px; }
      button, input, select { font-size: 14px; }
      h1 { font-size: 20px; }
      h2 { font-size: 18px; }
      h3, h4 { font-size: 16px; }
    }
  </style>
</head>
<body>
  <div id="app"></div>
  <script>
    // In-memory data store
    const appData = {
      tableCount: 5,
      menu: {
        Burgers: [
          { id: 1, name: "Classic Burger", price: 10 },
          { id: 2, name: "Cheese Burger", price: 12 }
        ],
        Mojitos: [
          { id: 3, name: "Classic Mojito", price: 5 },
          { id: 4, name: "Strawberry Mojito", price: 6 }
        ],
        Pizzas: [
          { id: 5, name: "Margherita Pizza", price: 15 },
          { id: 6, name: "Pepperoni Pizza", price: 16 }
        ],
        FriedChicken: [
          { id: 7, name: "Spicy Fried Chicken", price: 12 },
          { id: 8, name: "BBQ Fried Chicken", price: 13 }
        ]
      },
      orders: [],
      notifications: []
    };

    let currentSection = 'home';
    let selectedTable = null;
    let currentOrder = [];

    // Navigation
    function setSection(section) {
      currentSection = section;
      selectedTable = null;
      currentOrder = [];
      render();
    }

    // Rendering
    function render() {
      const appDiv = document.getElementById('app');
      appDiv.innerHTML = '';

      if (currentSection === 'home') {
        renderHome(appDiv);
      } else if (currentSection === 'order') {
        renderOrder(appDiv);
      } else if (currentSection === 'kitchen') {
        renderKitchen(appDiv);
      } else if (currentSection === 'admin') {
        renderAdmin(appDiv);
      }
    }

    // Home Screen
    function renderHome(appDiv) {
      appDiv.innerHTML = `
        <div class="container">
          <h1>Restaurant Management</h1>
          <button class="btn-blue" onclick="setSection('order')">Order Section</button>
          <button class="btn-green" onclick="setSection('kitchen')">Kitchen Section</button>
          <button class="btn-red" onclick="setSection('admin')">Admin Section</button>
        </div>
      `;
    }

    // Order Section
    function renderOrder(appDiv) {
      if (selectedTable) {
        let html = `
          <div class="section overflow-auto">
            <h2>${selectedTable} - Menu</h2>
        `;
        Object.keys(appData.menu).forEach(category => {
          html += `
            <div style="margin-bottom: 15px;">
              <h3>${category}</h3>
              <div class="grid">
          `;
          appData.menu[category].forEach(item => {
            html += `
              <button class="btn-blue" onclick="addToOrder(${item.id})">
                ${item.name} - $${item.price}
              </button>
            `;
          });
          html += `</div></div>`;
        });
        html += `
            <h3>Current Order</h3>
            <ul>
        `;
        currentOrder.forEach(item => {
          html += `<li>${item.name} - $${item.price}</li>`;
        });
        html += `
            </ul>
            <button class="btn-green" onclick="submitOrder()">Confirm Order</button>
            <button class="btn-gray" onclick="selectedTable = null; render()">Back</button>
          </div>
        `;
        appDiv.innerHTML = html;
      } else {
        const tables = Array.from({ length: appData.tableCount }, (_, i) => `Table ${i + 1}`);
        let html = `
          <div class="section">
            <h2>Order Section</h2>
            <div class="grid">
        `;
        tables.forEach(table => {
          html += `<button class="btn-blue" onclick="selectedTable = '${table}'; render()">${table}</button>`;
        });
        html += `
            <button class="btn-purple" onclick="selectedTable = 'Takeaway'; render()">Takeaway</button>
            </div>
            <h3>Notifications</h3>
            <ul>
        `;
        appData.notifications.forEach((note, index) => {
          html += `
            <li class="notification flex-row">
              <span style="margin-right: 10px;">${note.message}</span>
              <button class="btn-green" onclick="markAsPaid(${index})">Mark as Paid</button>
            </li>
          `;
        });
        html += `
            </ul>
            <button class="btn-gray" onclick="setSection('home')">Back to Home</button>
          </div>
        `;
        appDiv.innerHTML = html;
      }
    }

    window.addToOrder = function(itemId) {
      Object.values(appData.menu).flat().forEach(item => {
        if (item.id === itemId) {
          currentOrder.push({ ...item });
        }
      });
      render();
    };

    window.submitOrder = function() {
      if (currentOrder.length === 0) return;
      const order = {
        id: Date.now(),
        table: selectedTable,
        items: currentOrder,
        status: 'pending',
        timestamp: Date.now()
      };
      appData.orders.push(order);
      currentOrder = [];
      selectedTable = null;
      render();
    };

    window.markAsPaid = function(noteIndex) {
      const note = appData.notifications[noteIndex];
      const order = appData.orders.find(o => o.id === note.orderId);
      if (order) {
        order.status = 'paid';
        order.paidTimestamp = Date.now();
      }
      appData.notifications.splice(noteIndex, 1);
      render();
    };

    // Kitchen Section
    function renderKitchen(appDiv) {
      let html = `
        <div class="section">
          <h2>Kitchen Section</h2>
      `;
      const pendingOrders = appData.orders.filter(order => order.status === 'pending');
      if (pendingOrders.length === 0) {
        html += `<p>No pending orders.</p>`;
      } else {
        pendingOrders.forEach(order => {
          html += `
            <div class="card">
              <h3>${order.table}</h3>
              <ul>
          `;
          order.items.forEach(item => {
            html += `<li>${item.name} - $${item.price}</li>`;
          });
          html += `
              </ul>
              <button class="btn-green" onclick="markAsReady(${order.id})">Mark as Ready</button>
            </div>
          `;
        });
      }
      html += `
          <button class="btn-gray" onclick="setSection('home')">Back to Home</button>
        </div>
      `;
      appDiv.innerHTML = html;
    }

    window.markAsReady = function(orderId) {
      const order = appData.orders.find(o => o.id === orderId);
      if (order) {
        order.status = 'ready';
        appData.notifications.push({
          orderId: orderId,
          message: `Order for ${order.table} is ready!`
        });
      }
      render();
    };

    // Admin Section
    function renderAdmin(appDiv) {
      let html = `
        <div class="section overflow-auto">
          <h2>Admin Section</h2>
          <div style="margin-bottom: 15px;">
            <h3>Set Table Count</h3>
            <input type="number" id="tableCount" value="${appData.tableCount}" style="width: 100px;" />
            <button class="btn-blue" onclick="updateTableCount()">Update</button>
          </div>
          <div style="margin-bottom: 15px;">
            <h3>Add Category</h3>
            <input type="text" id="newCategory" placeholder="Category Name" />
            <button class="btn-blue" onclick="addCategory()">Add Category</button>
          </div>
          <div style="margin-bottom: 15px;">
            <h3>Add Menu Item</h3>
            <select id="newItemCategory">
              <option value="">Select Category</option>
              ${Object.keys(appData.menu).map(category => `<option value="${category}">${category}</option>`).join('')}
            </select>
            <input type="text" id="newItemName" placeholder="Item Name" />
            <input type="number" id="newItemPrice" placeholder="Price" style="width: 100px;" />
            <button class="btn-blue" onclick="addMenuItem()">Add Item</button>
          </div>
          <div style="margin-bottom: 15px;">
            <h3>Manage Menu</h3>
      `;
      Object.keys(appData.menu).forEach(category => {
        html += `
          <div style="margin-bottom: 10px;">
            <h4>${category}</h4>
        `;
        appData.menu[category].forEach(item => {
          html += `
            <div class="flex-row">
              <span style="margin-right: 10px;">${item.name} - $${item.price}</span>
              <button class="btn-yellow" onclick="editMenuItem('${category}', ${item.id})">Edit</button>
              <button class="btn-red" onclick="deleteMenuItem('${category}', ${item.id})">Delete</button>
            </div>
          `;
        });
        html += `</div>`;
      });
      html += `
          </div>
          <h3>Order History</h3>
      `;
      const paidOrders = appData.orders.filter(order => order.status === 'paid');
      if (paidOrders.length === 0) {
        html += `<p>No paid orders.</p>`;
      } else {
        paidOrders.forEach(order => {
          html += `
            <div class="card">
              <h4>${order.table} - ${new Date(order.paidTimestamp).toLocaleString()}</h4>
              <ul>
                ${order.items.map(item => `<li>${item.name} - $${item.price}</li>`).join('')}
              </ul>
            </div>
          `;
        });
      }
      html += `
          <button class="btn-gray" onclick="setSection('home')">Back to Home</button>
        </div>
      `;
      appDiv.innerHTML = html;
    }

    window.updateTableCount = function() {
      const tableCount = parseInt(document.getElementById('tableCount').value);
      if (tableCount > 0) {
        appData.tableCount = tableCount;
        render();
      }
    };

    window.addCategory = function() {
      const newCategory = document.getElementById('newCategory').value.trim();
      if (newCategory && !appData.menu[newCategory]) {
        appData.menu[newCategory] = [];
        document.getElementById('newCategory').value = '';
        render();
      }
    };

    window.addMenuItem = function() {
      const category = document.getElementById('newItemCategory').value;
      const name = document.getElementById('newItemName').value.trim();
      const price = parseFloat(document.getElementById('newItemPrice').value);
      if (category && name && price > 0) {
        appData.menu[category].push({
          id: Date.now(),
          name: name,
          price: price
        });
        document.getElementById('newItemCategory').value = '';
        document.getElementById('newItemName').value = '';
        document.getElementById('newItemPrice').value = '';
        render();
      }
    };

    window.editMenuItem = function(category, id) {
      const item = appData.menu[category].find(i => i.id === id);
      if (item) {
        const newName = prompt('Enter new name:', item.name);
        const newPrice = parseFloat(prompt('Enter new price:', item.price));
        if (newName && newPrice > 0) {
          item.name = newName.trim();
          item.price = newPrice;
          render();
        }
      }
    };

    window.deleteMenuItem = function(category, id) {
      appData.menu[category] = appData.menu[category].filter(i => i.id !== id);
      if (appData.menu[category].length === 0) {
        delete appData.menu[category];
      }
      render();
    };

    // Initial render
    render();
  </script>
</body>
</html>
